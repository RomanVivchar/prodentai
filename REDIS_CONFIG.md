# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Redis

## üê≥ Docker Compose

–í `docker-compose.yml` –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Redis –ø–æ –∏–º–µ–Ω–∏ —Å–µ—Ä–≤–∏—Å–∞:

```yaml
backend:
  environment:
    - REDIS_URL=redis://redis:6379  # ‚úÖ –ò–º—è —Å–µ—Ä–≤–∏—Å–∞, –Ω–µ localhost!

telegram_bot:
  environment:
    - REDIS_URL=redis://redis:6379  # ‚úÖ –ò–º—è —Å–µ—Ä–≤–∏—Å–∞, –Ω–µ localhost!
```

**–ü–æ—á–µ–º—É `redis://redis:6379`, –∞ –Ω–µ `redis://localhost:6379`?**
- –í Docker Compose —Å–µ—Ä–≤–∏—Å—ã –æ–±—â–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é —Å–µ—Ç—å Docker
- –ò–º—è —Å–µ—Ä–≤–∏—Å–∞ (`redis`) —Ä–µ–∑–æ–ª–≤–∏—Ç—Å—è –≤ IP-–∞–¥—Ä–µ—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- `localhost` –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Å–∞–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –∞ –Ω–µ –Ω–∞ –¥—Ä—É–≥–æ–π —Å–µ—Ä–≤–∏—Å

## üíª –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –≤–Ω–µ Docker (–ª–æ–∫–∞–ª—å–Ω–æ) –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:

```bash
REDIS_URL=redis://localhost:6379
```

–≠—Ç–æ –¥–µ—Ñ–æ–ª—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –∫–æ–¥–µ, —Ç–∞–∫ —á—Ç–æ –º–æ–∂–Ω–æ –Ω–µ —É–∫–∞–∑—ã–≤–∞—Ç—å —è–≤–Ω–æ.

## üìù –ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Redis

–í —Ç–µ–∫—É—â–µ–º –ø—Ä–æ–µ–∫—Ç–µ Redis –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:
1. **Health check** (`backend/main.py`) - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
2. **–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è** (–µ—Å–ª–∏ –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)

## ‚úÖ –¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

- ‚úÖ `docker-compose.yml` - –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω (`redis://redis:6379`)
- ‚úÖ –ö–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `REDIS_URL`
- ‚úÖ –î–µ—Ñ–æ–ª—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ `localhost` –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- ‚úÖ –í Docker –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `environment`

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞

–ß—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Redis:

```bash
# –í Docker
docker-compose exec backend python -c "import os; print(os.getenv('REDIS_URL'))"
# –î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏: redis://redis:6379

# –õ–æ–∫–∞–ª—å–Ω–æ
echo $REDIS_URL
# –î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏: redis://localhost:6379 (–∏–ª–∏ –ø—É—Å—Ç–æ, –µ—Å–ª–∏ –Ω–µ –∑–∞–¥–∞–Ω–æ)
```

